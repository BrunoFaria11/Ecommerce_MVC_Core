@model Ecommerce_MVC_Core.BootstrapModal.ModalFooter


<div class="modal-footer">
    @*<button data-dismiss="modal" id="@Model.CancelButtonID" class="btn btn-default" type="button">@Model.CancelButtonText</button>*@
    @if (!Model.OnlyCancelButton)
    {
<button class="btn btn-success" id="submit" type="submit">
    @Model.SubmitButtonText
</button>}
</div>
<script>

    const Toast = Swal.mixin({
        toast: true,
        position: 'top-end',
        showConfirmButton: false,
        timer: 3000
    });


    $(document).on("submit", "form", function (event) {
        event.preventDefault();
        doAjax();
        $("#@Model.IdForm").closest('.modal').removeClass("show");
        $("body").removeClass("modal-open");
        $(".modal-backdrop").remove();
    });


    async function doAjax(args) {
        event.preventDefault();
        debugger;
        $.ajax({
            type: 'POST',
            url: "/@Model.urlPOST",
            contentType: "application/json; charset=utf-8",
            dataType: 'json',

            data: { id: "@Model.IdEntity", model: $('#frm').serialize()},
            async: false,
            success: function (response) {
                    Toast.fire({
                        icon: 'success',
                        title: response
                    })
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert('error');
            }
        });
    }
</script>